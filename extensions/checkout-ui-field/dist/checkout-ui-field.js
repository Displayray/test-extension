(()=>{var ie=Object.defineProperty;var X=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var J=(e,t,r)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))se.call(t,r)&&J(e,r,t[r]);if(X)for(var r of X(t))ce.call(t,r)&&J(e,r,t[r]);return e};var q=(e,t,r)=>new Promise((n,o)=>{var i=p=>{try{c(r.next(p))}catch(f){o(f)}},d=p=>{try{c(r.throw(p))}catch(f){o(f)}},c=p=>p.done?n(p.value):Promise.resolve(p.value).then(i,d);c((r=r.apply(e,t)).next())});function E(e){if(e==null||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);return t==null||t===Object.prototype}function T(e){return e!=null&&e.kind===3}var N="__current",j={},de=[];function L(e,{strict:t=!0,components:r}={}){let n=0,o={strict:t,mounted:!1,channel:e,children:de,nodes:new WeakSet,parents:new WeakMap,tops:new WeakMap,components:new WeakMap,fragments:new WeakMap};t&&Object.freeze(r);let i={kind:0,options:t?Object.freeze({strict:t,components:r}):{strict:t,components:r},get children(){return o.children},createComponent(d,...c){if(r&&r.indexOf(d)<0)throw new Error(`Unsupported component: ${d}`);let[p,f,...s]=c,m=p!=null?p:{},l=[],C={};if(p)for(let a of Object.keys(p))a!=="children"&&(C[a]=k(re(p[a])));if(f)if(Array.isArray(f))for(let a of f)l.push(u(a,i));else{l.push(u(f,i));for(let a of s)l.push(u(a,i))}let g=`${n++}`,x={externalProps:t?Object.freeze(m):m,internalProps:C,children:t?Object.freeze(l):l},h=y({kind:1,get children(){return x.children},get props(){return x.externalProps},get remoteProps(){return x.internalProps},remove:()=>Z(h),updateProps:a=>le(h,a,x,o),append:(...a)=>M(h,a.map(b=>u(b,i)),x,o),appendChild:a=>S(h,u(a,i),x,o),removeChild:a=>D(h,a,x,o),replaceChildren:(...a)=>B(h,a.map(b=>u(b,i)),x,o),insertBefore:(a,b)=>R(h,u(a,i),b,x,o),insertChildBefore:(a,b)=>R(h,u(a,i),b,x,o)},j);o.components.set(h,x),Object.defineProperty(h,"type",{value:d,configurable:!1,writable:!1,enumerable:!0}),F(h,o),z(h,g,i);for(let a of x.children)A(h,a,o);return h},createText(d=""){let c=`${n++}`,p={text:d},f=m=>ae(s,m,p,o),s=y({kind:2,get text(){return p.text},update:f,updateText:f,remove:()=>Z(s)},j);return F(s,o),z(s,c,i),s},createFragment(){let d=`${n++}`,c={children:t?Object.freeze([]):[]},p=y({kind:3,get children(){return c.children},append:(...f)=>M(p,f.map(s=>u(s,i)),c,o),appendChild:f=>S(p,u(f,i),c,o),removeChild:f=>D(p,f,c,o),replaceChildren:(...f)=>B(p,f.map(s=>u(s,i)),c,o),insertBefore:(f,s)=>R(p,u(f,i),s,c,o),insertChildBefore:(f,s)=>R(p,u(f,i),s,c,o)},j);return o.fragments.set(p,c),F(p,o),z(p,d,i),p},append:(...d)=>M(i,d.map(c=>u(c,i)),o,o),appendChild:d=>S(i,u(d,i),o,o),replaceChildren:(...d)=>B(i,d.map(c=>u(c,i)),o,o),removeChild:d=>D(i,d,o,o),insertBefore:(d,c)=>R(i,u(d,i),c,o,o),insertChildBefore:(d,c)=>R(i,u(d,i),c,o,o),mount(){return o.mounted?Promise.resolve():(o.mounted=!0,Promise.resolve(e(0,o.children.map(_))))}};return i}function me(e,{tops:t}){var r;return((r=t.get(e))===null||r===void 0?void 0:r.kind)===0}function te(e,t){let r=n=>{if("children"in n)for(let o of n.children)t(o),r(o)};r(e)}function I(e,t,{remote:r,local:n}){let{mounted:o,channel:i}=t;o&&(e.kind===0||me(e,t))&&r(i),n()}function ae(e,t,r,n){return I(e,n,{remote:o=>o(3,e.id,t),local:()=>{r.text=t}})}var O=Symbol("ignore");function le(e,t,r,n){let{strict:o}=n,{internalProps:i,externalProps:d}=r,c={},p=[],f=!1;for(let s of Object.keys(t)){if(s==="children")continue;let m=d[s],l=t[s],C=i[s],g=re(l);if(C===g&&(g==null||typeof g!="object"))continue;let[x,h]=H(C,g);h&&p.push(...h),x!==O&&(f=!0,c[s]=x,T(m)&&K(m,n),T(l)&&A(e,l,n))}return I(e,n,{remote:s=>{f&&s(4,e.id,c)},local:()=>{let s=y(y({},d),t);r.externalProps=o?Object.freeze(s):s,r.internalProps=y(y({},r.internalProps),c);for(let[m,l]of p)m[N]=l}})}function H(e,t,r=new Set){return r.has(e)?[O]:(r.add(e),typeof e=="function"&&N in e?[typeof t=="function"?O:k(t),[[e,t]]]:Array.isArray(e)?xe(e,t,r):E(e)&&!T(e)?he(e,t,r):[e===t?O:t])}function k(e,t=new Map){let r=t.get(e);if(r)return r;if(T(e))return t.set(e,e),e;if(Array.isArray(e)){let n=[];t.set(e,n);for(let o of e)n.push(k(o,t));return n}if(E(e)){let n={};t.set(e,n);for(let o of Object.keys(e))n[o]=k(e[o],t);return n}if(typeof e=="function"){let n=(...o)=>n[N](...o);return Object.defineProperty(n,N,{enumerable:!1,configurable:!1,writable:!0,value:e}),t.set(e,n),n}return t.set(e,e),e}function P(e,t=new Set){if(!t.has(e)){if(t.add(e),Array.isArray(e))return e.reduce((r,n)=>{let o=P(n,t);return o?[...r,...o]:r},[]);if(E(e))return Object.keys(e).reduce((r,n)=>{let o=P(e[n],t);return o?[...r,...o]:r},[]);if(typeof e=="function")return N in e?[e]:void 0}}function Z(e){var t;(t=e.parent)===null||t===void 0||t.removeChild(e)}function M(e,t,r,n){for(let o of t)S(e,o,r,n)}function S(e,t,r,n){var o;let{nodes:i,strict:d}=n;if(!i.has(t))throw new Error("Cannot append a node that was not created by this remote root");let c=t.parent,p=(o=c==null?void 0:c.children.indexOf(t))!==null&&o!==void 0?o:-1;return I(e,n,{remote:f=>{f(1,e.id,p<0?e.children.length:e.children.length-1,_(t),c?c.id:!1)},local:()=>{A(e,t,n);let f;if(c){let s=oe(c,n),m=[...s.children];m.splice(p,1),c===e?f=m:(s.children=d?Object.freeze(m):m,f=[...r.children])}else f=[...r.children];f.push(t),r.children=d?Object.freeze(f):f}})}function B(e,t,r,n){for(let o of e.children)D(e,o,r,n);M(e,t,r,n)}function D(e,t,r,n){let{strict:o}=n;return I(e,n,{remote:i=>i(2,e.id,e.children.indexOf(t)),local:()=>{K(t,n);let i=[...r.children];i.splice(i.indexOf(t),1),r.children=o?Object.freeze(i):i}})}function R(e,t,r,n,o){var i;let{strict:d,nodes:c}=o;if(!c.has(t))throw new Error("Cannot insert a node that was not created by this remote root");let p=t.parent,f=(i=p==null?void 0:p.children.indexOf(t))!==null&&i!==void 0?i:-1;return I(e,o,{remote:s=>{let m=r==null?e.children.length-1:e.children.indexOf(r);s(1,e.id,m<f||f<0?m:m-1,_(t),p?p.id:!1)},local:()=>{A(e,t,o);let s;if(p){let m=oe(p,o),l=[...m.children];l.splice(f,1),p===e?s=l:(m.children=d?Object.freeze(l):l,s=[...n.children])}else s=[...n.children];r==null?s.push(t):s.splice(s.indexOf(r),0,t),n.children=d?Object.freeze(s):s}})}function u(e,t){return typeof e=="string"?t.createText(e):e}function A(e,t,r){let{tops:n,parents:o}=r,i=e.kind===0?e:n.get(e);n.set(t,i),o.set(t,e),v(t,r),te(t,d=>{n.set(d,i),v(d,r)})}function v(e,t){if(e.kind!==1)return;let r=e.props;r&&Object.values(r).forEach(n=>{T(n)&&A(e,n,t)})}function K(e,t){let{tops:r,parents:n}=t;r.delete(e),n.delete(e),te(e,o=>{r.delete(o),V(o,t)}),V(e,t)}function V(e,t){if(e.kind!==1)return;let r=e.remoteProps;for(let n of Object.keys(r!=null?r:{})){let o=r[n];T(o)&&K(o,t)}}function F(e,{parents:t,tops:r,nodes:n}){n.add(e),Object.defineProperty(e,"parent",{get(){return t.get(e)},configurable:!0,enumerable:!0}),Object.defineProperty(e,"top",{get(){return r.get(e)},configurable:!0,enumerable:!0})}function _(e){return e.kind===2?{id:e.id,kind:e.kind,text:e.text}:{id:e.id,kind:e.kind,type:e.type,props:e.remoteProps,children:e.children.map(t=>_(t))}}function re(e){return T(e)?ue(e):e}function ue(e){return{id:e.id,kind:e.kind,get children(){return e.children.map(t=>_(t))}}}function oe(e,t){return e.kind===0?t:e.kind===3?t.fragments.get(e):t.components.get(e)}function z(e,t,r){Object.defineProperty(e,"id",{value:t,configurable:!0,writable:!1,enumerable:!1}),Object.defineProperty(e,"root",{value:r,configurable:!0,writable:!1,enumerable:!1})}function he(e,t,r){if(!E(t)){var n;return[k(t),(n=P(e))===null||n===void 0?void 0:n.map(c=>[c,void 0])]}let o=!1,i=[],d={};for(let c in e){let p=e[c];if(!(c in t)){o=!0;let l=P(p);l&&i.push(...l.map(C=>[C,void 0]))}let f=t[c],[s,m]=H(p,f,r);m&&i.push(...m),s!==O&&(o=!0,d[c]=s)}for(let c in t)c in d||(o=!0,d[c]=k(t[c]));return[o?d:O,i]}function xe(e,t,r){if(!Array.isArray(t)){var n;return[k(t),(n=P(e))===null||n===void 0?void 0:n.map(s=>[s,void 0])]}let o=!1,i=[],d=t.length,c=e.length,p=Math.max(c,d),f=[];for(let s=0;s<p;s++){let m=e[s],l=t[s];if(s<d){if(s>=c){o=!0,f[s]=k(l);continue}let[C,g]=H(m,l,r);if(g&&i.push(...g),C===O){f[s]=m;continue}o=!0,f[s]=C}else{o=!0;let C=P(m);C&&i.push(...C.map(g=>[g,void 0]))}}return[o?f:O,i]}function ne(){return(t,r)=>{var n;function o(...i){return q(this,null,function*(){if(i.length===1)return r(...i);let[{channel:d,components:c},p]=i,f=L(d,{components:c,strict:!0}),s=r(f,p);return typeof s=="object"&&s!=null&&"then"in s&&(s=yield s),f.mount(),s})}return(n=globalThis.shopify)===null||n===void 0||n.extend(t,o),o}}var W=ne();var U="BlockStack";var G="Checkbox";var $="TextField";var Ze=W("purchase.checkout.shipping-option-list.render-after",(e,t)=>{let r={metafields:t.metafields.current,showDeliveryInstructions:!1};Y({root:e,api:t,state:r}),t.metafields.subscribe(n=>{r.metafields=n,Y({root:e,api:t,state:r})})});function Y({root:e,api:t,state:r}){var p;let{applyMetafieldChange:n}=t;for(let f of e.children)e.removeChild(f);let o="extension-app",i="instruction",d=(p=r.metafields)==null?void 0:p.find(f=>f.namespace===o&&f.key===i),c=e.createComponent(U,{},[e.createComponent(G,{checked:r.showDeliveryInstructions,onChange:()=>{r.showDeliveryInstructions=!r.showDeliveryInstructions,Y({root:e,api:t,state:r})}},"Provide delivery instructions")]);r.showDeliveryInstructions&&c.appendChild(e.createComponent($,{multiline:3,label:"Delivery instructions",onChange:f=>{n({type:"updateMetafield",namespace:o,key:i,valueType:"string",value:f})},value:d==null?void 0:d.value})),e.appendChild(c)}})();
